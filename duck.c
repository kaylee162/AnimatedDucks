#include "duck.h"
#include "gba.h"

// 0 = transparent
// 1 = outline 
// 2 = scarf color (dependent on duck[i].color)
// 3 = duck feather color
// 4 = eyes and mouth (black)
// 5 = beak and feet (orange)

DUCK ducks[DUCKCOUNT];

int bitmap1[] = {0, 0, 0, 0, 1, 1, 1, 1, 1, 1, 1, 1, 0, 0, 0, 0,
                0, 0, 0, 0, 1, 3, 3, 3, 3, 3, 3, 1, 0, 0, 0, 0,
                0, 0, 0, 0, 1, 3, 4, 3, 3, 4, 3, 1, 0, 0, 0, 0,
                0, 0, 0, 0, 1, 3, 4, 5, 5, 4, 3, 1, 0, 0, 0, 0,
                0, 0, 0, 0, 1, 3, 5, 5, 5, 5, 3, 1, 0, 0, 0, 0,
                0, 0, 0, 0, 1, 3, 3, 3, 3, 3, 3, 1, 0, 0, 0, 0,
                0, 0, 0, 0, 1, 1, 3, 3, 3, 3, 1, 1, 0, 0, 0, 0,
                0, 0, 0, 1, 1, 2, 2, 2, 2, 2, 2, 1, 1, 0, 0, 0,
                0, 0, 0, 1, 3, 3, 3, 3, 3, 2, 3, 3, 1, 0, 0, 0,
                0, 0, 0, 1, 3, 3, 3, 3, 3, 2, 3, 3, 1, 0, 0, 0,
                0, 0, 0, 1, 3, 3, 3, 3, 3, 3, 3, 3, 1, 0, 0, 0,
                0, 0, 0, 0, 1, 3, 3, 3, 3, 3, 3, 1, 0, 0, 0, 0,
                0, 0, 0, 0, 0, 1, 5, 5, 5, 5, 1, 0, 0, 0, 0, 0,
                0, 0, 0, 0, 1, 1, 5, 5, 5, 5, 1, 1, 0, 0, 0, 0,
                0, 0, 0, 0, 1, 5, 5, 5, 5, 5, 5, 1, 0, 0, 0, 0,
                0, 0, 0, 0, 1, 1, 1, 0, 0, 1, 1, 1, 0, 0, 0, 0};

int bitmap2[] = {0, 0, 0, 0, 1, 1, 1, 1, 1, 1, 1, 1, 0, 0, 0, 0,
                0, 0, 0, 0, 1, 3, 3, 3, 3, 3, 3, 1, 0, 0, 0, 0,
                0, 0, 0, 0, 1, 4, 3, 3, 3, 3, 4, 1, 0, 0, 0, 0,
                0, 0, 0, 0, 1, 4, 3, 5, 5, 3, 4, 1, 0, 0, 0, 0,
                0, 0, 0, 0, 1, 3, 5, 5, 5, 5, 3, 1, 0, 0, 0, 0,
                0, 0, 0, 0, 1, 3, 3, 3, 3, 3, 3, 1, 0, 0, 0, 0,
                0, 0, 0, 0, 1, 1, 3, 3, 3, 3, 1, 1, 0, 0, 0, 0,
                0, 0, 0, 1, 1, 2, 2, 2, 2, 2, 2, 1, 1, 0, 0, 0,
                0, 0, 0, 1, 3, 3, 3, 3, 3, 2, 3, 3, 1, 0, 0, 0,
                0, 0, 0, 1, 3, 3, 3, 3, 3, 2, 3, 3, 1, 0, 0, 0,
                0, 0, 0, 1, 3, 3, 3, 3, 3, 3, 3, 3, 1, 0, 0, 0,
                0, 0, 0, 0, 1, 3, 3, 3, 3, 3, 3, 1, 0, 0, 0, 0,
                0, 0, 0, 0, 0, 1, 5, 5, 5, 5, 1, 0, 0, 0, 0, 0,
                0, 0, 0, 0, 1, 1, 5, 5, 5, 5, 1, 1, 0, 0, 0, 0,
                0, 0, 0, 0, 1, 5, 5, 5, 5, 5, 5, 1, 0, 0, 0, 0,
                0, 0, 0, 0, 1, 1, 1, 0, 0, 1, 1, 1, 0, 0, 0, 0};

int bitmap3[] = {0, 0, 0, 0, 1, 1, 1, 1, 1, 1, 1, 1, 0, 0, 0, 0,
                0, 0, 0, 0, 1, 3, 3, 3, 3, 3, 3, 1, 0, 0, 0, 0,
                0, 0, 0, 0, 1, 4, 4, 3, 3, 4, 4, 1, 0, 0, 0, 0,
                0, 0, 0, 0, 1, 3, 4, 5, 5, 4, 3, 1, 0, 0, 0, 0,
                0, 0, 0, 0, 1, 3, 5, 5, 5, 5, 3, 1, 0, 0, 0, 0,
                0, 0, 0, 0, 1, 3, 3, 3, 3, 3, 3, 1, 0, 0, 0, 0,
                0, 0, 0, 0, 1, 1, 3, 3, 3, 3, 1, 1, 0, 0, 0, 0,
                0, 0, 0, 1, 1, 2, 2, 2, 2, 2, 2, 1, 1, 0, 0, 0,
                0, 0, 0, 1, 3, 3, 3, 3, 3, 2, 3, 3, 1, 0, 0, 0,
                0, 0, 0, 1, 3, 3, 3, 3, 3, 2, 3, 3, 1, 0, 0, 0,
                0, 0, 0, 1, 3, 3, 3, 3, 3, 3, 3, 3, 1, 0, 0, 0,
                0, 0, 0, 0, 1, 3, 3, 3, 3, 3, 3, 1, 0, 0, 0, 0,
                0, 0, 0, 0, 0, 1, 5, 5, 5, 5, 1, 0, 0, 0, 0, 0,
                0, 0, 0, 0, 1, 1, 5, 5, 5, 5, 1, 1, 0, 0, 0, 0,
                0, 0, 0, 0, 1, 5, 5, 5, 5, 5, 5, 1, 0, 0, 0, 0,
                0, 0, 0, 0, 1, 1, 1, 0, 0, 1, 1, 1, 0, 0, 0, 0};

int bitmap4[] = {0, 0, 0, 0, 1, 1, 1, 1, 1, 1, 1, 1, 0, 0, 0, 0,
                0, 0, 0, 0, 1, 3, 3, 3, 3, 3, 3, 1, 0, 0, 0, 0,
                0, 0, 0, 0, 1, 3, 3, 3, 3, 3, 3, 1, 0, 0, 0, 0,
                0, 0, 0, 0, 1, 4, 3, 5, 5, 3, 4, 1, 0, 0, 0, 0,
                0, 0, 0, 0, 1, 3, 5, 5, 5, 5, 3, 1, 0, 0, 0, 0,
                0, 0, 0, 0, 1, 3, 3, 3, 3, 3, 3, 1, 0, 0, 0, 0,
                0, 0, 0, 0, 1, 1, 3, 3, 3, 3, 1, 1, 0, 0, 0, 0,
                0, 0, 0, 1, 1, 2, 2, 2, 2, 2, 2, 1, 1, 0, 0, 0,
                0, 0, 0, 1, 3, 3, 3, 3, 3, 2, 3, 3, 1, 0, 0, 0,
                0, 0, 0, 1, 3, 3, 3, 3, 3, 2, 3, 3, 1, 0, 0, 0,
                0, 0, 0, 1, 3, 3, 3, 3, 3, 3, 3, 3, 1, 0, 0, 0,
                0, 0, 0, 0, 1, 3, 3, 3, 3, 3, 3, 1, 0, 0, 0, 0,
                0, 0, 0, 0, 0, 1, 5, 5, 5, 5, 1, 0, 0, 0, 0, 0,
                0, 0, 0, 0, 1, 1, 5, 5, 5, 5, 1, 1, 0, 0, 0, 0,
                0, 0, 0, 0, 1, 5, 5, 5, 5, 5, 5, 1, 0, 0, 0, 0,
                0, 0, 0, 0, 1, 1, 1, 0, 0, 1, 1, 1, 0, 0, 0, 0};

int bitmap5[] = {0, 0, 0, 0, 1, 1, 1, 1, 1, 1, 1, 1, 0, 0, 0, 0,
                0, 0, 0, 0, 1, 3, 3, 3, 3, 3, 3, 1, 0, 0, 0, 0,
                0, 0, 0, 0, 1, 3, 3, 3, 3, 3, 3, 1, 0, 0, 0, 0,
                0, 0, 0, 0, 1, 4, 4, 5, 5, 4, 4, 1, 0, 0, 0, 0,
                0, 0, 0, 0, 1, 3, 5, 5, 5, 5, 3, 1, 0, 0, 0, 0,
                0, 0, 0, 0, 1, 3, 3, 3, 3, 3, 3, 1, 0, 0, 0, 0,
                0, 0, 0, 0, 1, 1, 3, 3, 3, 3, 1, 1, 0, 0, 0, 0,
                0, 0, 0, 1, 1, 2, 2, 2, 2, 2, 2, 1, 1, 0, 0, 0,
                0, 0, 0, 1, 3, 3, 3, 3, 3, 2, 3, 3, 1, 0, 0, 0,
                0, 0, 0, 1, 3, 3, 3, 3, 3, 2, 3, 3, 1, 0, 0, 0,
                0, 0, 0, 1, 3, 3, 3, 3, 3, 3, 3, 3, 1, 0, 0, 0,
                0, 0, 0, 0, 1, 3, 3, 3, 3, 3, 3, 1, 0, 0, 0, 0,
                0, 0, 0, 0, 0, 1, 5, 5, 5, 5, 1, 0, 0, 0, 0, 0,
                0, 0, 0, 0, 1, 1, 5, 5, 5, 5, 1, 1, 0, 0, 0, 0,
                0, 0, 0, 0, 1, 5, 5, 5, 5, 5, 5, 1, 0, 0, 0, 0,
                0, 0, 0, 0, 1, 1, 1, 0, 0, 1, 1, 1, 0, 0, 0, 0};

// Initialize duckBitmaps so that it contains bitmap1 through bitmap5 defined above
// This is an array of pointers because it holds each of the arrays defined above, which C just treats as pointers!
int* duckBitmaps[] = {bitmap1, bitmap2, bitmap3, bitmap4, bitmap5};

void initializeDucks() {
    for (int i = 0; i < DUCKCOUNT; i++) {
        ducks[i].bitmap = duckBitmaps[i];
        switch (i) {
            case 0:
                ducks[i].color = GRASSGREEN;
                break;
            case 1:
                ducks[i].color = VIOLET;
                break;
            case 2:
                ducks[i].color = LIGHTPINK;
                break;
            case 3:
                ducks[i].color = REDORANGE;
                break;
            case 4:
                ducks[i].color = LIGHTBLUE;
                break; 
        }
    }
}

void drawDuck(DUCK* duck_ptr, int index) {
    int y = SCREENHEIGHT / 2 - 16;
    int x = 20 + (index * 45);
    for (int i = 0; i < DUCKLEN; i++) {
        for (int j = 0; j < DUCKLEN; j++) {
            // Retrieve the value of the duckBitmap at a given location
            int value = duck_ptr->bitmap[OFFSET(i, j, DUCKLEN)];
            switch (value) {
                case 1:
                    setPixel(x + i, y + j, DARKGRAY);
                    break;
                case 2:
                    setPixel(x + i, y + j, duck_ptr -> color);
                    break;
                case 3:
                    setPixel(x + i, y + j, YELLOW);
                    break;
                case 4:
                    setPixel(x + i, y + j, BLACK);
                    break;
                case 5:
                    setPixel(x + i, y + j, ORANGE);
                    break;
                default:
                    break;
            }
        }
    }
}